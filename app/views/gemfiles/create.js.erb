<% if @file.errors.present? %>
	// Shows errors
	$('.error').html('<div class="form-error"><%= @file.errors.full_messages.second %></div>')
<% else %>
	// Renders the results
	$('#result').html('<%= escape_javascript(render partial: 'vulnerabilities_list') %>')
	// Hides the readmore button if the content is not long enough
	$('.results-content').each(function(e){
		var advisoryDescriptionHeight = $('.advisory-description', this).outerHeight();
		var advisoryDescriptionContentHeight = $('.advisory-description .advisory-description-content', this).outerHeight();
		var collapseButton = $('.btn-readmore', this);

		if(advisoryDescriptionHeight >= advisoryDescriptionContentHeight){
			collapseButton.hide();
		}
	})
	// Scrolls to results when file uploaded
	$('html, body').animate({
    scrollTop: $('#result').offset().top - 100
  }, 300);
	$('#bottom-bar').html('<%= escape_javascript(render partial: 'bottom-bar') %>')
<% end %>